import"./modulepreload-polyfill-B5Qt9EMX.js";import{getFirestore as c,doc as l,getDoc as d}from"https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";import{getAuth as m,setPersistence as u,browserSessionPersistence as p,signInWithEmailAndPassword as f}from"https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";import{initializeApp as g}from"https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();const w={apiKey:"AIzaSyBOesAtQekwBT9_yuXpoaGCg6gmxiizzP4",authDomain:"ecgapp-7d874.firebaseapp.com",projectId:"ecgapp-7d874",storageBucket:"ecgapp-7d874.appspot.com",messagingSenderId:"931292339686",appId:"1:931292339686:web:2f75e50b490be933f94a27",measurementId:"G-2BE9FVBPMW"},a=g(w),y=c(a),i=m(a),h=async(o,s)=>{try{await u(i,p);const t=await f(i,o,s);return sessionStorage.setItem("user-creds",JSON.stringify(t.user)),t.user}catch(t){throw console.error("Error signing in:",t),t}},I=async o=>{const s=l(y,"UserAuthList",o),t=await d(s);return t.exists()?t.data():null};let b=document.getElementById("emailInput"),E=document.getElementById("passwordInput"),A=async o=>{o.preventDefault();try{const s=(await h(b.value,E.value)).uid,t=await I(s);if(t){const e=t.Role;if(e==="Admin")window.location.href="./html/admin/adminHome.html";else if(e==="User")window.location.href="./html/user/userHome.html";else throw new Error("Invalid user role")}else throw new Error("User document does not exist")}catch(s){alert(s.message)}};MainForm.addEventListener("submit",A);
